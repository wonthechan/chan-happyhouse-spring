<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="com.ssafy.happyhouse.mapper.HouseMapper">
	
	<select id="searchCount" resultType="int">
		select count(*) from housedeal 
		<if test="dong != null">
			where dong like concat('%',#{dong},'%')
		</if>
		<if test="aptName != null">
			where aptName like concat('%',#{aptName},'%')
		</if>
	</select>
	
	<select id="search" resultType="com.ssafy.happyhouse.dto.HouseDeal">
		select * from housedeal 
		<if test="dong != null">
			where dong like concat('%',#{dong},'%')
		</if>
		<if test="aptName != null">
			where aptName like concat('%',#{aptName},'%')
		</if>
		 limit #{pageNo} , #{interval}
	</select>
	
	<select id="searchOrderByDeal" resultType="com.ssafy.happyhouse.dto.HouseDeal">
		select * from housedeal 
		<if test="dong != null">
			where dong like concat('%',#{dong},'%')
		</if>
		<if test="aptName != null">
			where aptName like concat('%',#{aptName},'%')
		</if>
		<trim prefix="order by">
             <if test="order == 'asc'">  dealAmount asc </if>
             <if test="order == 'desc'">  dealAmount desc </if>                       
        </trim>
         limit #{pageNo} , #{interval}
	</select>
	
	<select id="detail" resultType="com.ssafy.happyhouse.dto.HouseDeal">
		select * from housedeal 
		where no = #{no}
	</select>
	
	<select id="searchAptImg" resultType="string">
		select distinct img from houseinfo 
		where aptName like concat('%',#{aptName},'%') 
	</select>
	
	
	<select id="searchDistinct" resultType="com.ssafy.happyhouse.dto.HouseInfo">
		select * from houseinfo
		<if test="dong != null">
			where dong like concat('%',#{dong},'%')
		</if>
		<if test="aptName != null">
			where aptName like concat('%',#{aptName},'%')
		</if>
	</select>

	
</mapper>






